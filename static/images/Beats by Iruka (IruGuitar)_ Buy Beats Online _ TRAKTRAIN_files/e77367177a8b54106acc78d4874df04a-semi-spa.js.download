var SPA_MODE_ENABLED=!1;SPAReload=function(){function a(d,e){if(c||!SPA_MODE_ENABLED)return void(c=!1);if(d.preventDefault(),e=e||null,!e){var f=$(this),e=f.attr("href");if(void 0===e||-1!==e.indexOf("#")&&-1!==[window.location.pathname,""].indexOf(e.split("#")[0]))return console.log("noprevent "+e),c=!0,void f.trigger("click")}if(0!==e.indexOf("http")&&"/cart"!==e&&-1===e.indexOf("/free/")&&null===e.match(/profile\/tracks\/([0-9]+)/)){var a=e,g=-1===e.indexOf("?")?"?":"&";a+=g+"ajax-content-only";var h=$(".js-spa-preloader");h.css({width:0}),h.animate({width:"35%"},200,"linear").animate({width:"70%"},4e3,"linear"),$.get(a,function(c){var d=$(c);"MOBILE"==DEVICE&&a.startsWith("/top-charts")?!$("body").hasClass("charts")&&$("body").addClass("charts"):$("body").hasClass("charts")&&$("body").removeClass("charts"),window.onload=null,d.find("script[src='//code.jquery.com/jquery-2.2.4.min.js']").remove(),d.find("script[src='https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js']").remove(),$(".remodal").data("remodal",null);var f=d.filter("#ajax_content").html();f||(window.location.href=e),history.pushState({page:e},null,e),$("main#content").replaceWith(d.filter("#ajax_content").html()),"DESKTOP"===DEVICE?($("script[src='/assets/js/main.js']").replaceWith("<script type='text/javascript' src='/assets/js/main.js' defer></script>"),$("script[src='/assets/js/libs.js']").replaceWith("<script type='text/javascript' src='/assets/js/libs.js' defer></script>")):$("script[src='/assets/js/mobile/main.js']").replaceWith("<script type='text/javascript' src='/assets/js/mobile/main.js' defer></script>");var g=$("script[src$='-main.min.js'],script[src$='-main.js']"),i=$("script[src$='-libs.min.js'],script[src$='-libs.js']");g.replaceWith("<script type='text/javascript' src='"+g.attr("src")+"' defer></script>"),i.replaceWith("<script type='text/javascript' src='"+i.attr("src")+"' defer></script>"),dispatchEvent(new Event("load")),window.scrollTo(0,0),b=Object.assign({},location),$("title").text(d.filter("#ajax_title").html()),d.filter(".ajax_meta").each(function(){var a=$(this);$("meta[name='"+a.data("name")+"']").attr("content",a.text())}),h.stop(!0,!1),h.animate({width:"100%"},500,"linear",function(){h.fadeOut(50,function(){h.css({width:0}),h.show()})}),loadLazyImages(),loadLazyVideos()})}else window.location.href=e}var b=Object.assign({},location),c=!1;return $(document).on("click","a[href]:not([target='_blank'])",a),window.onpopstate=function(c){b.pathname!==location.pathname&&a(c,location.pathname)},a}();