function WebAudioAnalyser(a,b,c){if(!(this instanceof WebAudioAnalyser))return new WebAudioAnalyser(a,b,c);/*var AudioContext = window.AudioContext // Default
        || window.webkitAudioContext // Safari and old versions of Chrome
        || false;*/ //if (!(ctx instanceof AudioContext || ctx instanceof webkitAudioContext)) (opts = ctx), (ctx = null)
if(c=c||{},this.ctx=b=b||new AudioContext,a instanceof AudioNode||(a=a instanceof Audio||a instanceof HTMLAudioElement?b.createMediaElementSource(a):b.createMediaStreamSource(a)),this.analyser=b.createAnalyser(),this.stereo=!!c.stereo,this.audible=!1!==c.audible,this.wavedata=null,this.freqdata=null,this.splitter=null,this.merger=null,this.source=a,!this.stereo)this.output=this.source,this.source.connect(this.analyser),this.audible&&this.analyser.connect(b.destination);else{this.analyser=[this.analyser],this.analyser.push(b.createAnalyser()),this.splitter=b.createChannelSplitter(2),this.merger=b.createChannelMerger(2),this.output=this.merger,this.source.connect(this.splitter);for(var d=0;2>d;d++)this.splitter.connect(this.analyser[d],d,0),this.analyser[d].connect(this.merger,0,d);this.audible&&this.merger.connect(b.destination)}}WebAudioAnalyser.prototype.waveform=function(a,b){a||(a=this.wavedata||(this.wavedata=new Uint8Array((this.analyser[0]||this.analyser).frequencyBinCount)));var c=this.stereo?this.analyser[b||0]:this.analyser;return c.getByteTimeDomainData(a),a},WebAudioAnalyser.prototype.frequencies=function(a,b){a||(a=this.freqdata||(this.freqdata=new Uint8Array((this.analyser[0]||this.analyser).frequencyBinCount)));var c=this.stereo?this.analyser[b||0]:this.analyser;return c.getByteFrequencyData(a),a};